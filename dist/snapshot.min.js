var snapshot=function(e,t,n,r,a,i,s,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
function u(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function o(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}u((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(a=s.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}function l(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var p=[{constant:!0,inputs:[{components:[{name:"target",type:"address"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate",outputs:[{name:"blockNumber",type:"uint256"},{name:"returnData",type:"bytes[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"addr",type:"address"}],name:"getEthBalance",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],d={1:"https://api.thegraph.com/subgraphs/name/balancer-labs/balancer-beta",42:"https://api.thegraph.com/subgraphs/name/balancer-labs/balancer-kovan"};function f(e,t){return(e.args||["%{address}"]).map((function(e){return"string"==typeof e?e.replace(/%{address}/g,t):e}))}var m=[{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];function y(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e,s;return c(this,(function(u){switch(u.label){case 0:return e="number"==typeof i?i:"latest",[4,B(t,n,m,r.map((function(e){return[a.address,"balanceOf",[e]]})),{blockTag:e})];case 1:return s=u.sent(),[2,Object.fromEntries(s.map((function(e,t){return[r[t],parseFloat(o.formatUnits(e.toString(),a.decimals))]})))]}}))}))}function b(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var n,a,s;return c(this,(function(o){switch(o.label){case 0:return n={delegations:{__args:{where:{delegate_in:r.map((function(e){return e.toLowerCase()})),delegator_not_in:r.map((function(e){return e.toLowerCase()})),space_in:["",e]},first:1e3},delegator:!0,space:!0,delegate:!0}},"latest"!==i&&(n.delegations.__args.block={number:i}),[4,F(P[t],n)];case 1:return(a=o.sent())&&a.delegations?(s={},a.delegations.forEach((function(e){return s[e.delegator]=e.delegate})),a.delegations.filter((function(e){return""!==e.space})).forEach((function(e){return s[e.delegator]=e.delegate})),[2,Object.fromEntries(r.map((function(e){return[e,Object.entries(s).filter((function(t){var n=t[1];return e.toLowerCase()===n})).map((function(e){return e[0]}))]})))]):[2,{}]}}))}))}var h={1:"0x9ef05f7f6deb616fd37ac3c959a2ddd25a54e4f5"},g=[{constant:!0,inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];var v={1:"0x1f9840a85d5af5bf1d1762f925bdaddc4201f984"},w=[{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"getCurrentVotes",outputs:[{internalType:"uint96",name:"",type:"uint96"}],payable:!1,stateMutability:"view",type:"function"}];var T=[{constant:!0,inputs:[],name:"getPricePerFullShare",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];var k=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"memberAddressByDelegateKey",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"members",outputs:[{internalType:"address",name:"delegateKey",type:"address"},{internalType:"uint256",name:"shares",type:"uint256"},{internalType:"uint256",name:"loot",type:"uint256"},{internalType:"bool",name:"exists",type:"bool"},{internalType:"uint256",name:"highestIndexYesVote",type:"uint256"},{internalType:"uint256",name:"jailed",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalShares",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];var S={1:"https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v2"};var x=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"userInfo",outputs:[{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"}];var j=[{constant:!0,inputs:[{name:"",type:"address"}],name:"issuanceData",outputs:[{name:"initialDebtOwnership",type:"uint256"},{name:"debtEntryIndex",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];var O=[{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"borrowBalanceStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];var E={1:"https://api.thegraph.com/subgraphs/name/creamfinancedev/cream-swap-v2",3:"https://api.thegraph.com/subgraphs/name/creamfinancedev/cream-swap-dev"},D=[{constant:!0,inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}];function C(e,t,n,r){return u(this,void 0,void 0,(function(){var a,i,o;return c(this,(function(u){switch(u.label){case 0:return a={poolShares:{__args:{where:{userAddress_in:t.map((function(e){return e.toLowerCase()})),balance_gt:0},first:1e3,orderBy:"balance",orderDirection:"desc"},userAddress:{id:!0},balance:!0,poolId:{totalShares:!0,tokens:{id:!0,balance:!0}}}},"latest"!==r&&(a.poolShares.__args.block={number:r}),[4,F(E[e],a)];case 1:return i=u.sent(),o={},i&&i.poolShares&&i.poolShares.forEach((function(e){return e.poolId.tokens.map((function(t){if(t.id.split("-")[1]===n.toLowerCase()){var r=s.getAddress(e.userAddress.id);o[r]||(o[r]=0),o[r]=o[r]+t.balance/e.poolId.totalShares*e.balance}}))})),[2,o||{}]}}))}))}function _(e,t,n,r,a){return u(this,void 0,void 0,(function(){var i,s,u,l,p,d,f;return c(this,(function(c){switch(c.label){case 0:for(i="number"==typeof a?a:"latest",s=r.pools.length,u=n.length,l=[],p=function(e){l.push.apply(l,n.map((function(t){return[r.pools[e].address,"balanceOf",[t]]})))},d=0;d<s;d++)p(d);return[4,B(e,t,D,l,{blockTag:i})];case 1:return f=c.sent(),[2,Object.fromEntries(n.map((function(e,t){for(var n=0,r=0;r<s;r++)n+=parseFloat(o.formatUnits(f[t+r*u].toString(),18));return[e,n]})))]}}))}))}var A={balancer:function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e,n,o;return c(this,(function(u){switch(u.label){case 0:return e={poolShares:{__args:{where:{userAddress_in:r.map((function(e){return e.toLowerCase()})),balance_gt:0},first:1e3,orderBy:"balance",orderDirection:"desc"},userAddress:{id:!0},balance:!0,poolId:{totalShares:!0,tokens:{id:!0,balance:!0}}}},"latest"!==i&&(e.poolShares.__args.block={number:i}),[4,F(d[t],e)];case 1:return n=u.sent(),o={},n&&n.poolShares&&n.poolShares.forEach((function(e){return e.poolId.tokens.map((function(t){if(t.id.split("-")[1]===a.address.toLowerCase()){var n=s.getAddress(e.userAddress.id);o[n]||(o[n]=0),o[n]=o[n]+t.balance/e.poolId.totalShares*e.balance}}))})),[2,o||{}]}}))}))},"contract-call":function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e,s;return c(this,(function(u){switch(u.label){case 0:return e="number"==typeof i?i:"latest",[4,B(t,n,[a.methodABI],r.map((function(e){return[a.address,a.methodABI.name,f(a,e)]})),{blockTag:e})];case 1:return s=u.sent(),[2,Object.fromEntries(s.map((function(e,t){return[r[t],parseFloat(o.formatUnits(e.toString(),a.decimals))]})))]}}))}))},"erc20-balance-of":y,"erc20-balance-of-fixed-total":function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e,s;return c(this,(function(o){switch(o.label){case 0:return[4,y(0,t,n,r,a,i)];case 1:return e=o.sent(),s=Object.values(e).reduce((function(e,t){return e+t}),0),[2,Object.fromEntries(Object.entries(e).map((function(e){return[e[0],a.total*e[1]/s]})))]}}))}))},"erc20-balance-of-cv":function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e;return c(this,(function(s){switch(s.label){case 0:return[4,y(0,t,n,r,a,i)];case 1:return e=s.sent(),[2,Object.fromEntries(Object.entries(e).map((function(e){return[e[0],Math.sqrt(e[1])]})))]}}))}))},"erc20-balance-of-coeff":function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e;return c(this,(function(s){switch(s.label){case 0:return[4,y(0,t,n,r,a,i)];case 1:return e=s.sent(),[2,Object.fromEntries(Object.entries(e).map((function(e){return[e[0],e[1]*a.coeff]})))]}}))}))},"erc20-with-balance":function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e;return c(this,(function(s){switch(s.label){case 0:return[4,y(0,t,n,r,a,i)];case 1:return e=s.sent(),[2,Object.fromEntries(Object.entries(e).map((function(e){return[e[0],e[1]>(a.minBalance||0)?1:0]})))]}}))}))},"erc20-balance-of-delegation":function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var s,o;return c(this,(function(u){switch(u.label){case 0:return[4,b(e,t,0,r,0,i)];case 1:return s=u.sent(),0===Object.keys(s).length?[2,{}]:(console.debug("Delegations",s),[4,y(0,t,n,Object.values(s).reduce((function(e,t){return e.concat(t)})),a,i)]);case 2:return o=u.sent(),console.debug("Delegators score",o),[2,Object.fromEntries(r.map((function(e){return[e,s[e]?s[e].reduce((function(e,t){return e+o[t]}),0):0]})))]}}))}))},"eth-balance":function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e,a;return c(this,(function(s){switch(s.label){case 0:return e="number"==typeof i?i:"latest",[4,B(t,n,p,r.map((function(e){return[M[t],"getEthBalance",[e]]})),{blockTag:e})];case 1:return a=s.sent(),[2,Object.fromEntries(a.map((function(e,t){return[r[t],parseFloat(o.formatUnits(e.toString(),18))]})))]}}))}))},"maker-ds-chief":function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e,s;return c(this,(function(u){switch(u.label){case 0:return e="number"==typeof i?i:"latest",[4,B(t,n,g,r.map((function(e){return[h[t],"deposits",[e]]})),{blockTag:e})];case 1:return s=u.sent(),[2,Object.fromEntries(s.map((function(e,t){return[r[t],parseFloat(o.formatUnits(e.toString(),a.decimals))]})))]}}))}))},uni:function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e,s;return c(this,(function(u){switch(u.label){case 0:return e="number"==typeof i?i:"latest",[4,B(t,n,w,r.map((function(n){return[v[t],"getCurrentVotes",[n.toLowerCase()],{blockTag:e}]})))];case 1:return s=u.sent(),[2,Object.fromEntries(s.map((function(e,t){return[r[t],parseFloat(o.formatUnits(e.toString(),a.decimals))]})))]}}))}))},"yearn-vault":function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e,s,u,l;return c(this,(function(c){switch(c.label){case 0:return e="number"==typeof i?i:"latest",[4,Promise.all([y(0,t,n,r,a,i),B(t,n,T,[[a.address,"getPricePerFullShare",[]]],{blockTag:e})])];case 1:return s=c.sent(),u=s[0],l=s[1][0],l=parseFloat(o.formatUnits(l.toString(),18)),[2,Object.fromEntries(Object.entries(u).map((function(e){return[e[0],e[1]*l]})))]}}))}))},moloch:function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e,s,u;return c(this,(function(c){switch(c.label){case 0:return e="number"==typeof i?i:"latest",[4,B(t,n,k,r.map((function(e){return[a.address,"memberAddressByDelegateKey",[e]]})),{blockTag:e})];case 1:return s=c.sent(),[4,B(t,n,k,s.filter((function(e){return"0x0000000000000000000000000000000000000000"!==e.toString()})).map((function(e){return[a.address,"members",[e.toString()]]})),{blockTag:e})];case 2:return u=c.sent(),[2,Object.fromEntries(u.map((function(e,t){return[r[t],parseFloat(o.formatUnits(e.shares.toString(),a.decimals))]})))]}}))}))},uniswap:function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e,n,o,u;return c(this,(function(c){switch(c.label){case 0:return e={users:{__args:{where:{id_in:r.map((function(e){return e.toLowerCase()}))},first:1e3},id:!0,liquidityPositions:{__args:{where:{liquidityTokenBalance_gt:0}},liquidityTokenBalance:!0,pair:{id:!0,token0:{id:!0},reserve0:!0,token1:{id:!0},reserve1:!0,totalSupply:!0}}}},"latest"!==i&&(e.users.liquidityPositions.__args.block={number:i}),n=a.address.toLowerCase(),[4,F(S[t],e)];case 1:return o=c.sent(),u={},o&&o.users&&o.users.forEach((function(e){e.liquidityPositions.filter((function(e){return e.pair.token0.id==n||e.pair.token1.id==n})).forEach((function(t){var r=t.pair.reserve0/t.pair.totalSupply,a=t.pair.reserve1/t.pair.totalSupply,i=t.pair.token0.id==n?r*t.liquidityTokenBalance:a*t.liquidityTokenBalance,o=s.getAddress(e.id);u[o]||(u[o]=0),u[o]=u[o]+i}))})),[2,u||{}]}}))}))},pancake:function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e,s,u;return c(this,(function(c){switch(c.label){case 0:return e="number"==typeof i?i:"latest",[4,y(0,t,n,r,a,i)];case 1:return s=c.sent(),[4,Promise.all(a.chefAddresses.map((function(a){return B(t,n,x,r.map((function(t){return[a,"userInfo",[t],{blockTag:e}]})),{blockTag:e})})))];case 2:return u=c.sent(),[2,Object.fromEntries(Object.entries(s).map((function(e,t){return[e[0],e[1]+u.reduce((function(e,n){return e+parseFloat(o.formatUnits(n[t].amount.toString(),a.decimals))}),0)]})))]}}))}))},synthetix:function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e,a,s;return c(this,(function(u){switch(u.label){case 0:return e="number"==typeof i?i:"latest",[4,B(t,n,j,r.map((function(e){return["0x4b9Ca5607f1fF8019c1C6A3c2f0CC8de622D5B82","issuanceData",[e]]})),{blockTag:e})];case 1:return a=u.sent(),s=function(e){var t=1e5*e;return console.log("scaledValue",t),Math.sqrt(t)},[2,Object.fromEntries(a.map((function(e,t){return[r[t],s(parseFloat(o.formatUnits(e.initialDebtOwnership.toString(),27)))]})))]}}))}))},ctoken:function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e,s,u,l,p,d,f,m,y,b,h,g,v,w,T,k;return c(this,(function(c){switch(c.label){case 0:return e="number"==typeof i?i:"latest","number"!=typeof i?[3,1]:(u=i-a.offsetCheck,[3,3]);case 1:return[4,n.getBlockNumber()];case 2:u=c.sent()-a.offsetCheck,c.label=3;case 3:return s=u,l=r.map((function(e){return[a.address,"balanceOf",[e]]})),p=r.map((function(e){return[a.address,"borrowBalanceStored",[e]]})),d=l.concat(p),[4,Promise.all([B(t,n,O,d,{blockTag:e}),B(t,n,O,r.map((function(e){return[a.address,"balanceOf",[e]]})),{blockTag:s})])];case 4:for(f=c.sent(),m=f[0],y=f[1],b=m.slice(0,r.length),h=m.slice(r.length),g={},v=0;v<b.length;v++)w=1,a.borrowingRestricted&&(w=0==h[v].toString().localeCompare("0")?1:0),T=parseFloat(o.formatUnits(b[v].toString(),a.decimals)),k=parseFloat(o.formatUnits(y[v].toString(),a.decimals)),g[r[v]]=Math.min(T,k)*w;return[2,g]}}))}))},cream:function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var e,s,o,u,l,p,d,f,m;return c(this,(function(c){switch(c.label){case 0:return e=a.address,[4,Promise.all([C(t,r,e,i),_(t,n,r,a,i)])];case 1:for(s=c.sent(),o=s[0],u=s[1],l=0,p=Object.entries(u);l<p.length;l++)d=p[l],f=d[0],m=d[1],o[f]||(o[f]=0),o[f]=o[f]+m;return[2,o||{}]}}))}))}},M={1:"0xeefba1e63905ef1d7acba5a8513c70307c1ce441",4:"0x42ad527de7d4e9d9d011ac45b31d8551f8fe9821",5:"0x77dca2c955b15e9de4dbbcf1246b4b85b651e50e",6:"0x53c43764255c17bd724f74c4ef150724ac50a3ed",42:"0x2cc8688c5f75e365aaeeb4ea8d6a480405a48d2a",56:"0x1ee38d535d541c55c9dae27b12edf090c608e6fb",97:"0x8b54247c6BAe96A6ccAFa468ebae96c4D7445e46",100:"0xb5b692a88bdfc81ca69dcb1d924f59f0413a602a",wanchain:"0xba5934ab3056fca1fa458d30fbb3810c3eb5145f"},P={1:"https://api.thegraph.com/subgraphs/name/snapshot-labs/snapshot",4:"https://api.thegraph.com/subgraphs/name/snapshot-labs/snapshot-rinkeby",42:"https://api.thegraph.com/subgraphs/name/snapshot-labs/snapshot-kovan"};function L(e,t,n,a){return u(this,void 0,void 0,(function(){var i,s,o;return c(this,(function(u){switch(u.label){case 0:i=new r.Contract(n[0],t,e),u.label=1;case 1:return u.trys.push([1,3,,4]),s=n[2]||[],[4,i[n[1]].apply(i,l(s,[a||{}]))];case 2:return[2,u.sent()];case 3:return o=u.sent(),[2,Promise.reject(o)];case 4:return[2]}}))}))}function B(e,t,a,i,s){return u(this,void 0,void 0,(function(){var o,u,l;return c(this,(function(c){switch(c.label){case 0:o=new r.Contract(M[e],p,t),u=new n.Interface(a),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,o.aggregate(i.map((function(e){return[e[0].toLowerCase(),u.encodeFunctionData(e[1],e[2])]})),s||{})];case 2:return l=c.sent(),[2,l[1].map((function(e,t){return u.decodeFunctionResult(i[t][1],e)}))];case 3:return c.sent(),[2,Promise.reject()];case 4:return[2]}}))}))}function F(e,t){return u(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return[4,fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({query:a.jsonToGraphQLQuery({query:t})})})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent().data||{}]}}))}))}function q(e,t,n,a,i,s){return void 0===s&&(s={}),u(this,void 0,void 0,(function(){var o,u,p;return c(this,(function(c){switch(c.label){case 0:return o=e.getSigner(),u=new r.Contract(t,n,e),[4,(p=u.connect(o))[a].apply(p,l(i,[s]))];case 1:return[2,c.sent()]}}))}))}var I={call:L,multicall:B,subgraphRequest:F,ipfsGet:function(e,t,n){return void 0===n&&(n="ipfs"),u(this,void 0,void 0,(function(){return c(this,(function(r){return[2,fetch("https://"+e+"/"+n+"/"+t).then((function(e){return e.json()}))]}))}))},sendTransaction:q,getScores:function(e,t,n,r,a,i){return void 0===i&&(i="latest"),u(this,void 0,void 0,(function(){return c(this,(function(s){switch(s.label){case 0:return[4,Promise.all(t.map((function(t){return A[t.name](e,n,r,a,t.params,i)})))];case 1:return[2,s.sent()]}}))}))},validateSchema:function(e,t){var n=(new i).compile(e),r=n(t);return r||n.errors}},U={1:"https://api.thegraph.com/subgraphs/name/aragon/aragon-govern-mainnet",4:"https://api.thegraph.com/subgraphs/name/evalir/aragon-govern-rinkeby"},R=[{inputs:[{components:[{components:[{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"executionTime",type:"uint256"},{internalType:"address",name:"submitter",type:"address"},{internalType:"contract IERC3000Executor",name:"executor",type:"address"},{components:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct ERC3000Data.Action[]",name:"actions",type:"tuple[]"},{internalType:"bytes32",name:"allowFailuresMap",type:"bytes32"},{internalType:"bytes",name:"proof",type:"bytes"}],internalType:"struct ERC3000Data.Payload",name:"payload",type:"tuple"},{components:[{internalType:"uint256",name:"executionDelay",type:"uint256"},{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct ERC3000Data.Collateral",name:"scheduleDeposit",type:"tuple"},{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct ERC3000Data.Collateral",name:"challengeDeposit",type:"tuple"},{internalType:"address",name:"resolver",type:"address"},{internalType:"bytes",name:"rules",type:"bytes"}],internalType:"struct ERC3000Data.Config",name:"config",type:"tuple"}],internalType:"struct ERC3000Data.Container",name:"_container",type:"tuple"}],name:"schedule",outputs:[{internalType:"bytes32",name:"containerHash",type:"bytes32"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"nonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],G={registryEntry:{__args:{id:void 0},executor:{address:!0},queue:{address:!0,config:{executionDelay:!0,scheduleDeposit:{token:!0,amount:!0},challengeDeposit:{token:!0,amount:!0},resolver:!0,rules:!0}}}};function N(n,r,a,i,s,o){return u(this,void 0,void 0,(function(){var u,l,p,d,f,m,y;return c(this,(function(c){switch(c.label){case 0:return(u=G).registryEntry.__args.id=a,[4,F(U[n],u)];case 1:return l=c.sent(),p=l.registryEntry.queue.config,[4,L(r,R,[l.registryEntry.queue.address,"nonce"])];case 2:return d=c.sent(),f=new e(d.toString()),m=f.add(new e("1")),y=Math.round(Date.now()/1e3)+Number(p.executionDelay)+60,[4,q(r,l.registryEntry.queue.address,R,"schedule",[{payload:{nonce:m.toString(),executionTime:y,submitter:i,executor:l.registryEntry.executor.address,actions:o,allowFailuresMap:"0x0000000000000000000000000000000000000000000000000000000000000000",proof:s?t.toUtf8Bytes(s):"0x00"},config:{executionDelay:p.executionDelay,scheduleDeposit:{token:p.scheduleDeposit.token,amount:p.scheduleDeposit.amount},challengeDeposit:{token:p.challengeDeposit.token,amount:p.challengeDeposit.amount},resolver:p.resolver,rules:p.rules}}],{gasLimit:5e5})];case 3:return[2,c.sent()]}}))}))}var V={aragon:function(){function e(){this.author="Evalir",this.version="0.1.3",this.name="Aragon Govern",this.website="https://aragon.org/blog/snapshot"}return e.prototype.action=function(e,t,n,r,a,i){return u(this,void 0,void 0,(function(){var s,o;return c(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,t.listAccounts()];case 1:return s=u.sent()[0],[4,N(e,t,n.id,s,a,r["choice"+i].actions)];case 2:return[2,u.sent()];case 3:return o=u.sent(),console.error(o),[3,4];case 4:return[2]}}))}))},e}()},K={space:{$schema:"http://json-schema.org/draft-07/schema#",$ref:"#/definitions/Space",definitions:{Space:{title:"Space",type:"object",properties:{name:{type:"string",title:"name",maxLength:32},network:{type:"string",title:"network",maxLength:32},symbol:{type:"string",title:"symbol",maxLength:12},skin:{type:"string",title:"skin",maxLength:32},domain:{type:"string",title:"domain",maxLength:64},strategies:{type:"array",minItems:1,maxItems:3,items:{type:"object",properties:{name:{type:"string",maxLength:64,title:"name"},params:{type:"object",title:"params"}},required:["name"],additionalProperties:!1},title:"strategies"},members:{type:"array",items:{type:"string",maxLength:64},title:"members"},filters:{type:"object",properties:{defaultTab:{type:"string"},minScore:{type:"number",minimum:0},onlyMembers:{type:"boolean"},invalids:{type:"array",items:{type:"string",maxLength:64},title:"invalids"}},additionalProperties:!1}},required:["name","network","symbol","strategies"],additionalProperties:!1}}}.definitions.Space};return{plugins:V,strategies:A,schemas:K,utils:I}}(BN,strings,abi$9,contracts,jsonToGraphqlQuery,Ajv,address,units);
